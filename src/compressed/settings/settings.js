const defaultSettings={theme:"light",useCustomBackground:!1,backgroundURL:"",backgroundImage:null,showSearch:!0,showShortcuts:!0,searchEngine:"google",searchBarPosition:{x:10,y:120},fontSize:16,groupScale:100,useGlassBackground:!0,customThemes:[],customColors:{primary:"#457b9d",secondary:"#a8dadc",accent:"#e63946",text:"#1d3557",background:"#f1faee"},shortcuts:[{title:"Google",url:"https://www.google.com"},{title:"Youtube",url:"https://www.youtube.com"},{title:"Gmail",url:"https://mail.google.com"},{title:"Drive",url:"https://drive.google.com"},{title:"Maps",url:"https://maps.google.com"}],apps:[{name:"Account",icon:"https://www.gstatic.com/images/branding/product/1x/avatar_square_blue_32dp.png",url:"https://myaccount.google.com/"},{name:"Search",icon:"https://www.gstatic.com/images/branding/product/1x/googleg_32dp.png",url:"https://www.google.com/"},{name:"Maps",icon:"https://maps.gstatic.com/mapfiles/maps_lite/favicon_maps.ico",url:"https://maps.google.com/"},{name:"YouTube",icon:"https://www.youtube.com/s/desktop/1c3bfd26/img/favicon_32x32.png",url:"https://youtube.com/"},{name:"Play",icon:"https://www.gstatic.com/images/branding/product/1x/play_round_32dp.png",url:"https://play.google.com/"},{name:"Gmail",icon:"https://ssl.gstatic.com/ui/v1/icons/mail/rfr/gmail.ico",url:"https://mail.google.com/"},{name:"Drive",icon:"https://ssl.gstatic.com/images/branding/product/1x/drive_32dp.png",url:"https://drive.google.com/"},{name:"Calendar",icon:"https://ssl.gstatic.com/calendar/images/favicon_v2021_32.ico",url:"https://calendar.google.com/"},{name:"Photos",icon:"https://ssl.gstatic.com/images/branding/product/1x/photos_32dp.png",url:"https://photos.google.com/"}]};let currentSettings={};const customBgInput=document.getElementById("custom-bg"),bgFileInput=document.getElementById("bg-file"),bgFileButton=document.getElementById("bg-file-button"),fileNameDisplay=document.getElementById("file-name"),bgPreviewImg=document.getElementById("bg-preview-img"),useCustomBgToggle=document.getElementById("use-custom-bg"),bgInputContainer=document.getElementById("bg-input-container"),showSearchToggle=document.getElementById("show-search"),showShortcutsToggle=document.getElementById("show-shortcuts")||{checked:!0},searchEngineSelect=document.getElementById("search-engine"),saveButton=document.getElementById("save-settings"),resetButton=document.getElementById("reset-settings"),resetNewtabButton=document.getElementById("reset-newtab"),themeGrid=document.getElementById("theme-grid"),glassBackgroundToggle=document.getElementById("glass-background"),fontSizeSlider=document.getElementById("font-size"),fontSizeValue=document.getElementById("font-size-value"),groupScaleSlider=document.getElementById("group-scale"),groupScaleValue=document.getElementById("group-scale-value"),customThemeName=document.getElementById("custom-theme-name"),customPrimary=document.getElementById("custom-primary"),customSecondary=document.getElementById("custom-secondary"),customAccent=document.getElementById("custom-accent"),customText=document.getElementById("custom-text"),customBackground=document.getElementById("custom-background"),saveCustomThemeBtn=document.getElementById("save-custom-theme"),exportSettingsBtn=document.getElementById("export-settings"),importSettingsBtn=document.getElementById("import-settings"),importFileInput=document.getElementById("import-file"),baseThemes=[{id:"light",name:"Light Minimal"},{id:"dark",name:"Modern Dark"},{id:"forest",name:"Forest"},{id:"ocean",name:"Ocean"},{id:"sunset",name:"Sunset"},{id:"cyber",name:"Cyberpunk"},{id:"midnight",name:"Midnight Blue"},{id:"emerald",name:"Emerald Dark"},{id:"slate",name:"Slate Blue"},{id:"deep",name:"Deep Purple"},{id:"nord",name:"Nord"},{id:"rose",name:"Rose Gold"},{id:"neon",name:"Neon Night"},{id:"autumn",name:"Autumn"},{id:"pastel",name:"Pastel"},{id:"mono",name:"Monochrome"},{id:"custom",name:"Custom Theme"}];function handleFileUpload(e){const t=e.target.files[0];if(!t)return;fileNameDisplay.textContent=t.name;const o=new FileReader;o.onload=function(e){const t=e.target.result;bgPreviewImg.src=t,bgPreviewImg.style.display="block",currentSettings.backgroundImage=t,customBgInput.value=""},o.readAsDataURL(t)}function updateBackgroundPreview(){const e=customBgInput.value.trim();e&&(bgPreviewImg.src=e,bgPreviewImg.style.display="block",currentSettings.backgroundURL=e,currentSettings.backgroundImage=null)}function toggleBackgroundInputs(){const e=useCustomBgToggle.checked;bgInputContainer.style.display=e?"block":"none",currentSettings.useCustomBackground=e}async function loadSettings(){try{if("undefined"!=typeof chrome&&chrome.storage){const e=await chrome.storage.sync.get(["settings"]);currentSettings=e.settings||{...defaultSettings};try{const e=await chrome.storage.local.get(["backgroundImage"]);e.backgroundImage&&(currentSettings.backgroundImage=e.backgroundImage,console.log("Background image loaded from Chrome local storage"))}catch(e){console.warn("Error loading background image from local storage:",e)}}else{const e=localStorage.getItem("settings");currentSettings=e?JSON.parse(e):{...defaultSettings};try{const e=localStorage.getItem("backgroundImage");e&&(currentSettings.backgroundImage=e)}catch(e){console.warn("Error loading background image from localStorage:",e)}}currentSettings.customThemes||(currentSettings.customThemes=[]),useCustomBgToggle.checked=!0===currentSettings.useCustomBackground,customBgInput.value=currentSettings.backgroundURL||"",showSearchToggle.checked=!1!==currentSettings.showSearch,showShortcutsToggle&&"checked"in showShortcutsToggle&&(showShortcutsToggle.checked=!1!==currentSettings.showShortcuts),glassBackgroundToggle.checked=!1!==currentSettings.useGlassBackground,searchEngineSelect.value=currentSettings.searchEngine||"google",currentSettings.backgroundImage?(bgPreviewImg.src=currentSettings.backgroundImage,bgPreviewImg.style.display="block"):currentSettings.backgroundURL?(bgPreviewImg.src=currentSettings.backgroundURL,bgPreviewImg.style.display="block"):bgPreviewImg.style.display="none",toggleBackgroundInputs(),fontSizeSlider.value=currentSettings.fontSize||16,updateFontSizeDisplay(),groupScaleSlider.value=currentSettings.groupScale||100,updateGroupScaleDisplay(),currentSettings.customColors?(customPrimary.value=currentSettings.customColors.primary||"#457b9d",customSecondary.value=currentSettings.customColors.secondary||"#a8dadc",customAccent.value=currentSettings.customColors.accent||"#e63946",customText.value=currentSettings.customColors.text||"#1d3557",customBackground.value=currentSettings.customColors.background||"#f1faee"):currentSettings.customColors={primary:"#457b9d",secondary:"#a8dadc",accent:"#e63946",text:"#1d3557",background:"#f1faee"},generateThemeGrid(),applyThemeToPage(currentSettings.theme||"light"),console.log("Settings loaded:",currentSettings)}catch(e){console.error("Error loading settings:",e),currentSettings={...defaultSettings},generateThemeGrid()}}async function saveSettings(){try{const e=document.querySelector(".theme-card.active"),t=e?e.dataset.themeId:"light",o=JSON.parse(JSON.stringify(currentSettings)),n={...o,theme:t,useCustomBackground:useCustomBgToggle.checked,backgroundURL:customBgInput.value,backgroundImage:currentSettings.backgroundImage||null,showSearch:showSearchToggle.checked,showShortcuts:showShortcutsToggle&&"checked"in showShortcutsToggle?showShortcutsToggle.checked:!1!==currentSettings.showShortcuts,searchEngine:searchEngineSelect.value,searchBarPosition:o.searchBarPosition||{x:10,y:120},fontSize:parseInt(fontSizeSlider.value)||16,groupScale:parseInt(groupScaleSlider.value)||100,useGlassBackground:glassBackgroundToggle.checked,customColors:{primary:customPrimary.value,secondary:customSecondary.value,accent:customAccent.value,text:customText.value,background:customBackground.value}};n.customThemes||(n.customThemes=[]),n.headerLinks||(n.headerLinks=defaultSettings.headerLinks),n.apps||(n.apps=defaultSettings.apps),currentSettings=n;const s=currentSettings.backgroundImage,r={...currentSettings,backgroundImage:null};if("undefined"!=typeof chrome&&chrome.storage)try{await chrome.storage.sync.set({settings:r}),console.log("Settings saved to Chrome sync storage"),s?(await chrome.storage.local.set({backgroundImage:s}),console.log("Background image saved to Chrome local storage")):await chrome.storage.local.remove("backgroundImage")}catch(e){console.error("Error saving to Chrome storage:",e),localStorage.setItem("settings",JSON.stringify(r)),s?localStorage.setItem("backgroundImage",s):localStorage.removeItem("backgroundImage"),console.log("Settings saved to localStorage (fallback)")}else localStorage.setItem("settings",JSON.stringify(r)),s?localStorage.setItem("backgroundImage",s):localStorage.removeItem("backgroundImage"),console.log("Settings saved to localStorage");saveButton.textContent="Saved!",setTimeout((()=>{saveButton.textContent="Save Settings"}),2e3),window.location.reload()}catch(e){console.error("Error saving settings:",e),alert("Your image file is too large. Try decreasing the resolution and try again."),saveButton.textContent="Save Settings"}}function resetSettings(){currentSettings={...defaultSettings},useCustomBgToggle.checked=defaultSettings.useCustomBackground,customBgInput.value=defaultSettings.backgroundURL,currentSettings.backgroundImage=null,bgPreviewImg.style.display="none",bgPreviewImg.src="",fileNameDisplay.textContent="No file chosen",toggleBackgroundInputs(),showSearchToggle.checked=defaultSettings.showSearch,showShortcutsToggle&&"checked"in showShortcutsToggle&&(showShortcutsToggle.checked=defaultSettings.showShortcuts),glassBackgroundToggle.checked=defaultSettings.useGlassBackground,searchEngineSelect.value=defaultSettings.searchEngine,fontSizeSlider.value=defaultSettings.fontSize,updateFontSizeDisplay(),groupScaleSlider.value=defaultSettings.groupScale,updateGroupScaleDisplay(),currentSettings.customThemes=[],generateThemeGrid(),applyThemeToPage(defaultSettings.theme),console.log("Settings reset to defaults (not saved yet)")}async function resetNewTab(){if(confirm("This will remove all your link groups and reset the new tab page layout. Are you sure?"))try{const e=[{type:"grid",title:"",links:[{title:"Google",url:"https://www.google.com"},{title:"YouTube",url:"https://www.youtube.com"},{title:"Maps",url:"https://maps.google.com"},{title:"Gmail",url:"https://mail.google.com"},{title:"Drive",url:"https://drive.google.com"}],x:"50%",y:200,rows:1,columns:5}];currentSettings.searchBarPosition={x:"50%",y:120},"undefined"!=typeof chrome&&chrome.storage&&chrome.storage.sync?await chrome.storage.sync.set({groups:e,settings:currentSettings}):(localStorage.setItem("groups",JSON.stringify(e)),localStorage.setItem("settings",JSON.stringify(currentSettings))),resetNewtabButton.textContent="Reset Complete!",setTimeout((()=>{resetNewtabButton.textContent="Reset New Tab Page"}),2e3)}catch(e){console.error("Error resetting new tab page:",e),alert("Error resetting new tab page. Please try again.")}}function generateThemeGrid(){themeGrid.innerHTML="";const e=[...baseThemes,...currentSettings.customThemes||[]];document.querySelector(".custom-theme-section").style.display="none",e.forEach((e=>{const t=document.createElement("div");t.className="theme-card",t.dataset.themeId=e.id,e.id===currentSettings.theme&&(t.classList.add("active"),("custom"===e.id||e.id.startsWith("custom-"))&&(document.querySelector(".custom-theme-section").style.display="block"));const o=document.createElement("div");o.className="theme-pie";["primary","secondary","accent","text","background"].forEach(((t,n)=>{const s=document.createElement("div");s.className="pie-slice";const r=72*n%360;if(s.style.transform=`rotate(${r}deg)`,e.id.startsWith("custom-"))s.style.backgroundColor=e[t];else if("custom"===e.id){const e={primary:customPrimary.value,secondary:customSecondary.value,accent:customAccent.value,text:customText.value,background:customBackground.value};s.style.backgroundColor=e[t]}else s.style.backgroundColor=`var(--${e.id}-${t})`;o.appendChild(s)}));const n=document.createElement("div");if(n.className="theme-name",n.textContent=e.name,e.id.startsWith("custom-")){const o=document.createElement("button");o.className="theme-delete-btn",o.innerHTML="×",o.title="Delete custom theme",o.addEventListener("click",(t=>{t.stopPropagation(),deleteCustomTheme(e.id)})),t.appendChild(o)}t.addEventListener("click",(()=>{document.querySelectorAll(".theme-card").forEach((e=>e.classList.remove("active"))),t.classList.add("active"),"custom"===e.id||e.id.startsWith("custom-")?document.querySelector(".custom-theme-section").style.display="block":document.querySelector(".custom-theme-section").style.display="none",applyThemeToPage(e.id)})),t.appendChild(o),t.appendChild(n),themeGrid.appendChild(t)}))}function deleteCustomTheme(e){confirm("Are you sure you want to delete this custom theme?")&&(currentSettings.customThemes=currentSettings.customThemes.filter((t=>t.id!==e)),currentSettings.theme===e&&(currentSettings.theme="light",applyThemeToPage("light")),generateThemeGrid(),console.log(`Custom theme ${e} deleted successfully`))}function updateCustomThemePreview(){currentSettings.customColors={primary:customPrimary.value,secondary:customSecondary.value,accent:customAccent.value,text:customText.value,background:customBackground.value};const e=document.querySelector(".theme-card.active");e&&"custom"===e.dataset.themeId&&applyThemeToPage("custom"),generateThemeGrid()}function saveCustomTheme(){const e=customThemeName.value.trim()||"Custom Theme",t={id:"custom-"+Date.now(),name:e,primary:customPrimary.value,secondary:customSecondary.value,accent:customAccent.value,text:customText.value,background:customBackground.value};currentSettings.customThemes||(currentSettings.customThemes=[]),currentSettings.customThemes.push(t),generateThemeGrid(),customThemeName.value="",saveCustomThemeBtn.textContent="Theme Added!",setTimeout((()=>{saveCustomThemeBtn.textContent="Save Custom Theme"}),2e3)}function isColorDark(e){let t,o,n;if(e.startsWith("#")){let s=e.substring(1);3===s.length?(t=parseInt(s.charAt(0)+s.charAt(0),16),o=parseInt(s.charAt(1)+s.charAt(1),16),n=parseInt(s.charAt(2)+s.charAt(2),16)):(t=parseInt(s.substring(0,2),16),o=parseInt(s.substring(2,4),16),n=parseInt(s.substring(4,6),16))}else{if(!e.startsWith("rgb"))return!1;{const s=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*[\d.]+)?\)/);if(!s)return!1;t=parseInt(s[1]),o=parseInt(s[2]),n=parseInt(s[3])}}return(299*t+587*o+114*n)/1e3<128}function applyGlassBackgroundToSettings(){const e=!1!==currentSettings.useGlassBackground,t=document.querySelector(".settings-container");t&&(e?t.classList.add("glass-background"):t.classList.remove("glass-background"));const o=document.querySelector("header");o&&(e?o.classList.add("glass-background"):o.classList.remove("glass-background"));document.querySelectorAll(".settings-section").forEach((t=>{e?t.classList.add("glass-background"):t.classList.remove("glass-background")}));const n=document.querySelector(".background-inputs");n&&(e?n.classList.add("glass-background"):n.classList.remove("glass-background"));const s=document.querySelector(".custom-theme-section");s&&(e?s.classList.add("glass-background"):s.classList.remove("glass-background"))}function applyThemeToPage(e){const t=e.startsWith("custom-")||"custom"===e;let o={};if(t)if("custom"===e)o={primary:currentSettings.customColors?.primary||customPrimary.value,secondary:currentSettings.customColors?.secondary||customSecondary.value,accent:currentSettings.customColors?.accent||customAccent.value,text:currentSettings.customColors?.text||customText.value,background:currentSettings.customColors?.background||customBackground.value};else{const t=currentSettings.customThemes.find((t=>t.id===e));t&&(o={primary:t.primary,secondary:t.secondary,accent:t.accent,text:t.text,background:t.background})}if(t&&o.primary){document.documentElement.style.setProperty("--primary-color",o.primary),document.documentElement.style.setProperty("--secondary-color",o.secondary),document.documentElement.style.setProperty("--accent-color",o.accent),document.documentElement.style.setProperty("--text-color",o.text),document.documentElement.style.setProperty("--background-color",o.background);const e=isColorDark(o.primary);document.documentElement.style.setProperty("--contrast-text-color",e?"#ffffff":"#000000")}else{document.documentElement.style.setProperty("--primary-color",`var(--${e}-primary)`),document.documentElement.style.setProperty("--secondary-color",`var(--${e}-secondary)`),document.documentElement.style.setProperty("--accent-color",`var(--${e}-accent)`),document.documentElement.style.setProperty("--text-color",`var(--${e}-text)`),document.documentElement.style.setProperty("--background-color",`var(--${e}-background)`);let t=!1;"dark"!==e&&"midnight"!==e&&"emerald"!==e&&"slate"!==e&&"deep"!==e&&"nord"!==e&&"cyber"!==e&&"neon"!==e||(t=!0),document.documentElement.style.setProperty("--contrast-text-color",t?"#ffffff":"#000000")}const n=getComputedStyle(document.documentElement).getPropertyValue("--background-color").trim();n&&""!==n&&(document.body.style.backgroundColor=n),currentSettings.useCustomBackground?currentSettings.backgroundImage?(document.documentElement.style.setProperty("--background-image",`url("${currentSettings.backgroundImage}")`),document.body.style.backgroundImage=`url("${currentSettings.backgroundImage}")`,document.body.style.backgroundRepeat="no-repeat",document.body.style.backgroundSize="cover",document.body.style.backgroundPosition="center",document.body.classList.add("bg-loaded")):currentSettings.backgroundURL?(document.documentElement.style.setProperty("--background-image",`url("${currentSettings.backgroundURL}")`),document.body.style.backgroundImage=`url("${currentSettings.backgroundURL}")`,document.body.style.backgroundRepeat="no-repeat",document.body.style.backgroundSize="cover",document.body.style.backgroundPosition="center",document.body.classList.add("bg-loaded")):(document.documentElement.style.setProperty("--background-image","none"),document.body.style.backgroundImage=""):(document.documentElement.style.setProperty("--background-image","none"),document.body.style.backgroundImage=""),document.body.className="",document.body.classList.add(`theme-${e.split("-")[0]}`),applyGlassBackgroundToSettings()}function updateFontSizeDisplay(){const e=fontSizeSlider.value;fontSizeValue.textContent=`${e}px`,document.documentElement.style.setProperty("--base-font-size",`${e}px`),document.documentElement.style.setProperty("--text-scale",e/16),document.documentElement.style.fontSize=`${e}px`}function updateGroupScaleDisplay(){const e=groupScaleSlider.value;groupScaleValue.textContent=`${e}%`,document.documentElement.style.setProperty("--group-scale",e/100),document.documentElement.style.setProperty("--element-scale",e/100),document.documentElement.style.transform=`scale(${e/100})`,document.documentElement.style.transformOrigin="center top",document.documentElement.style.setProperty("--spacing-multiplier",e/100)}async function exportSettings(){try{exportSettingsBtn.textContent="Exporting...",exportSettingsBtn.disabled=!0;const e={timestamp:(new Date).toISOString(),version:"3.0",settings:currentSettings,groups:null,backgroundImage:null};if("undefined"!=typeof chrome&&chrome.storage)try{const t=await chrome.storage.sync.get(["groups","groupsLocation"]);if("local"===t.groupsLocation){const t=await chrome.storage.local.get(["groups"]);e.groups=t.groups||[]}else e.groups=t.groups||[];const o=await chrome.storage.local.get(["backgroundImage"]);e.backgroundImage=o.backgroundImage||null}catch(t){console.warn("Error accessing Chrome storage:",t),e.groups=JSON.parse(localStorage.getItem("groups")||"[]"),e.backgroundImage=localStorage.getItem("backgroundImage")||null}else e.groups=JSON.parse(localStorage.getItem("groups")||"[]"),e.backgroundImage=localStorage.getItem("backgroundImage")||null;const t=JSON.stringify(e,null,2),o=new Blob([t],{type:"application/json"}),n=document.createElement("a");n.href=URL.createObjectURL(o),n.download=`newtab-settings-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),exportSettingsBtn.textContent="Exported!",setTimeout((()=>{exportSettingsBtn.textContent="Export Settings",exportSettingsBtn.disabled=!1}),2e3)}catch(e){console.error("Error exporting settings:",e),alert("Error exporting settings. Please try again."),exportSettingsBtn.textContent="Export Settings",exportSettingsBtn.disabled=!1}}async function importSettings(e){const t=e.target.files[0];if(t){try{const e=`This will import settings from "${t.name}" and:\n\n• Replace all current settings, themes, and preferences\n• Add imported link groups and widgets to your existing ones\n• Replace your background image if one is included\n\nThis action cannot be undone. Do you want to continue?`;if(!confirm(e))return void(importFileInput.value="");importSettingsBtn.textContent="Importing...",importSettingsBtn.disabled=!0;const o=await t.text(),n=JSON.parse(o);if(!n.settings)throw new Error("Invalid settings file: missing settings data");let s=[];if("undefined"!=typeof chrome&&chrome.storage)try{const e=await chrome.storage.sync.get(["groups","groupsLocation"]);if("local"===e.groupsLocation){s=(await chrome.storage.local.get(["groups"])).groups||[]}else s=e.groups||[]}catch(e){s=JSON.parse(localStorage.getItem("groups")||"[]")}else s=JSON.parse(localStorage.getItem("groups")||"[]");const r=[...s];if(n.groups&&Array.isArray(n.groups)&&r.push(...n.groups),currentSettings={...defaultSettings,...n.settings},"undefined"!=typeof chrome&&chrome.storage)try{const e={...currentSettings};delete e.backgroundImage,await chrome.storage.sync.set({settings:e,groups:r}),n.backgroundImage&&(await chrome.storage.local.set({backgroundImage:n.backgroundImage}),currentSettings.backgroundImage=n.backgroundImage)}catch(e){console.warn("Error saving to Chrome storage, using localStorage:",e),localStorage.setItem("settings",JSON.stringify(currentSettings)),localStorage.setItem("groups",JSON.stringify(r)),n.backgroundImage&&localStorage.setItem("backgroundImage",n.backgroundImage)}else localStorage.setItem("settings",JSON.stringify(currentSettings)),localStorage.setItem("groups",JSON.stringify(r)),n.backgroundImage&&localStorage.setItem("backgroundImage",n.backgroundImage);importSettingsBtn.textContent="Import Successful!",setTimeout((()=>{window.location.reload()}),1e3)}catch(e){console.error("Error importing settings:",e),alert(`Error importing settings: ${e.message}. Please check the file format and try again.`),importSettingsBtn.textContent="Import Settings",importSettingsBtn.disabled=!1}importFileInput.value=""}}document.addEventListener("DOMContentLoaded",loadSettings),saveButton.addEventListener("click",saveSettings),resetButton.addEventListener("click",resetSettings),resetNewtabButton.addEventListener("click",resetNewTab),exportSettingsBtn.addEventListener("click",exportSettings),importSettingsBtn.addEventListener("click",(()=>importFileInput.click())),importFileInput.addEventListener("change",importSettings),useCustomBgToggle.addEventListener("change",toggleBackgroundInputs),bgFileButton.addEventListener("click",(()=>bgFileInput.click())),bgFileInput.addEventListener("change",handleFileUpload),customBgInput.addEventListener("input",updateBackgroundPreview),fontSizeSlider.addEventListener("input",updateFontSizeDisplay),groupScaleSlider.addEventListener("input",updateGroupScaleDisplay),saveCustomThemeBtn.addEventListener("click",saveCustomTheme),customPrimary.addEventListener("input",updateCustomThemePreview),customSecondary.addEventListener("input",updateCustomThemePreview),customAccent.addEventListener("input",updateCustomThemePreview),customText.addEventListener("input",updateCustomThemePreview),customBackground.addEventListener("input",updateCustomThemePreview),customPrimary.value="#457b9d",customSecondary.value="#a8dadc",customAccent.value="#e63946",customText.value="#1d3557",customBackground.value="#f1faee";