chrome.runtime.onInstalled.addListener((async o=>{chrome.runtime.setUninstallURL("https://forms.gle/ENonKhwExQMowTuG8");const{settings:t,groups:e}=await chrome.storage.sync.get(["settings","groups"]),s=t&&Object.keys(t).length>0,a=e&&e.length>0;if("install"===o.reason&&!s){if(!s){const o={theme:"light",useCustomBackground:!1,backgroundURL:"",backgroundImage:null,showSearch:!0,searchEngine:"google",searchBarPosition:{x:540,y:360},useGlassBackground:!0,fontSize:16,groupScale:100,headerLinks:[{name:"Gmail",url:"https://mail.google.com"},{name:"Photos",url:"https://photos.google.com"},{name:"Search Labs",url:"https://labs.google.com"}],apps:[{name:"Account",icon:"https://www.gstatic.com/images/branding/product/1x/avatar_square_blue_32dp.png",url:"https://myaccount.google.com/"},{name:"Search",icon:"https://www.gstatic.com/images/branding/product/1x/googleg_32dp.png",url:"https://www.google.com/"},{name:"Maps",icon:"https://maps.gstatic.com/mapfiles/maps_lite/favicon_maps.ico",url:"https://maps.google.com/"},{name:"YouTube",icon:"https://www.youtube.com/s/desktop/1c3bfd26/img/favicon_32x32.png",url:"https://youtube.com/"},{name:"Play",icon:"https://www.gstatic.com/images/branding/product/1x/play_round_32dp.png",url:"https://play.google.com/"},{name:"Gmail",icon:"https://ssl.gstatic.com/ui/v1/icons/mail/rfr/gmail.ico",url:"https://mail.google.com/"},{name:"Drive",icon:"https://ssl.gstatic.com/images/branding/product/1x/drive_32dp.png",url:"https://drive.google.com/"},{name:"Calendar",icon:"https://ssl.gstatic.com/calendar/images/favicon_v2021_32.ico",url:"https://calendar.google.com/"},{name:"Photos",icon:"https://ssl.gstatic.com/images/branding/product/1x/photos_32dp.png",url:"https://photos.google.com/"}]};console.log("Applying default settings"),await chrome.storage.sync.set({settings:o})}if(!a){const o={type:"stack",title:"Google Apps",x:"10%",y:"10%",links:[{title:"Gmail",url:"https://mail.google.com"},{title:"Google Docs",url:"https://docs.google.com"},{title:"Google Drive",url:"https://drive.google.com"},{title:"Google Calendar",url:"https://calendar.google.com"}]};console.log("Applying default groups"),await chrome.storage.local.set({groups:[o]}),await chrome.storage.sync.set({groupsLocation:"local"})}"install"===o.reason&&chrome.tabs.create({url:chrome.runtime.getURL("/newtab/newtab.html?newInstall=true")})}}));